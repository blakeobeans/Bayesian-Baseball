"0","set.seed(1234)"
"0","#cone prior- 750 correlations from onion prior with eta = 4"
"0","R <- as.data.frame(rlkjcorr(750, K=3, eta=4)) #see rlkjcorr()"
"0","prior <- NULL; prior$home <- R[,2,2]; prior$away <- R[,3,2]; prior <- as.data.frame(prior); colnames(prior) <- c(""home"", ""away"")"
"0","#posterior distribution of correlations between intercepts and slopes for BOTH home and away teams"
"0","posterior.samples <- extract.samples(vivs.m)"
"0","posterior <- NULL; posterior$home <- melt(posterior.samples$Rho_home[,1,2]); posterior$away <- melt(posterior.samples$Rho_away[,1,2]); posterior <- as.data.frame(posterior); colnames(posterior) <- c(""home"", ""away"")"
"0","#bind, plot"
"0","multilevel.intercept.slope.correlaton <- rbind(prior, posterior); "
"0","multilevel.intercept.slope.correlaton$Distribution <- c(rep(""prior"", nrow(prior)/2), rep(""posterior"", nrow(posterior)/2))"
"0","ggplot(multilevel.intercept.slope.correlaton, (aes(home, away))) +"
"0","  geom_vline(xintercept=0, col=""gray"", size=.2) +"
"0","  geom_hline(yintercept=0, col=""gray"", size=.2) +"
"0","  geom_density2d(aes(alpha=Distribution), col = ""black"", size=.2) +"
"0","  scale_alpha_manual(values=c(1, .2)) +"
"0","  theme_minimal() +"
"0","  theme(legend.position=""bottom"") +"
"0","  ggtitle(""Correlation between Intercepts and Slopes"") +"
"0","  xlab(""Home Team"") + ylab(""Away Team"") "
